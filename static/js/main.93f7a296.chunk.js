(this["webpackJsonpmulti-counter"]=this["webpackJsonpmulti-counter"]||[]).push([[0],{21:function(e,t,n){e.exports=n.p+"static/media/add.66ce4250.svg"},22:function(e,t,n){e.exports=n.p+"static/media/check.e294285e.svg"},23:function(e,t,n){e.exports=n.p+"static/media/check-all.e078e73b.svg"},24:function(e,t,n){e.exports=n.p+"static/media/clear.4217c5fb.svg"},25:function(e,t,n){e.exports=n.p+"static/media/close.b840e171.svg"},26:function(e,t,n){e.exports=n.p+"static/media/edit.539b3c38.svg"},27:function(e,t,n){e.exports=n.p+"static/media/invert.f2ea96f5.svg"},28:function(e,t,n){e.exports=n.p+"static/media/menu.55f68494.svg"},29:function(e,t,n){e.exports=n.p+"static/media/remove.16793e81.svg"},30:function(e,t,n){e.exports=n.p+"static/media/reset.1cd9ed86.svg"},31:function(e,t,n){e.exports=n.p+"static/media/subtract.d788b81e.svg"},34:function(e,t,n){e.exports=n(51)},39:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),l=n.n(o),c=(n(39),n(4)),i=n(2),u=n(1),s=n(3),m=n(5),d=n(6),h=n(11),p=n.n(h),f=n(7),v=n.n(f),C=r.a.createContext(!1),E=function(){},g=function(e,t){return"indexOf"===t?!!e.indexOf:e.indexOf?-1!==e.indexOf(t):!!e[t]},b=navigator.platform.toLowerCase(),N=navigator.userAgent.toLowerCase(),y=navigator.appVersion.toLowerCase(),O=g(b,"mac")||g(N,"mac")||g(y,"mac"),k=["date","datetime-local","email","month","number","password","search","tel","text","time","url","week"],S=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},w={MAX_SAFE_INTEGER:S(Number.MAX_SAFE_INTEGER),MIN_SAFE_INTEGER:S(Number.MIN_SAFE_INTEGER)},I={NO_OP:E,includes:g,initializeOrGetArrayProperty:function(e,t){return e[t]||(e[t]=[]),e[t]},isMacOs:O,isTextForm:function(e){var t=e.tagName.toUpperCase();return"INPUT"===t&&g(k,e.type.toLowerCase())||"TEXTAREA"===t},insertCommas:S,numbersWithCommas:w},M=n(21),x=n.n(M),A=n(22),R=n.n(A),D=n(23),j=n.n(D),_=n(24),U=n.n(_),T=n(25),K=n.n(T),B=n(26),G=n.n(B),P=n(27),F=n.n(P),L=n(28),X=n.n(L),V=n(29),J=n.n(V),W=n(30),q=n.n(W),H=n(31),z=n.n(H),$={add:x.a,check:R.a,checkAll:j.a,clear:U.a,close:K.a,edit:G.a,invert:F.a,menu:X.a,remove:J.a,reset:q.a,subtract:z.a},Y=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).getCorrectValue=function(t){return t<e.props.min?t=e.props.min:t>e.props.max&&(t=e.props.max),t},e.callOnChangeByValue=function(t,n){t=e.getCorrectValue(t),e.props.value!==t&&e.props.onChange(Object(u.a)({},n,{value:t,name:e.props.name}))},e.countDown=function(){var t=e.props.value-e.props.step;e.callOnChangeByValue(t)},e.countUp=function(){var t=e.props.value+e.props.step;e.callOnChangeByValue(t)},e.handleCounterClick=function(t){e.context&&e.props.onChange({checked:!e.props.checked,name:e.props.name})},e.handleCheckboxChange=function(t){e.props.onChange({checked:t.target.checked,name:e.props.name})},e.handleEditClick=function(t){t.stopPropagation(),t.preventDefault(),e.props.onEditClick(e.props.name)},e.handleCountDownClick=function(t){t.preventDefault(),e.countDown()},e.handleCountUpClick=function(t){t.preventDefault(),e.countUp()},e.render=function(){var t=e.context,n={counter:v()("counter",{"counter-checked":e.props.checked}),normalCounterButton:v()("button-with-icon",{"force-hidden":t}),editCounterButton:v()("button-with-icon-text",{"force-hidden":!t})};return r.a.createElement("div",{className:n.counter,onClick:e.handleCounterClick},r.a.createElement("ul",null,r.a.createElement("li",{className:"counter-row"},r.a.createElement("label",{className:"counter-label"},e.props.name)),r.a.createElement("li",{className:"counter-row"},r.a.createElement("input",{type:"text",value:e.props.value,readOnly:!0,className:"counter-value"}),r.a.createElement("button",{type:"button",onClick:e.handleCountDownClick,className:n.normalCounterButton},r.a.createElement("img",{src:$.subtract,alt:"Count down"})),r.a.createElement("button",{type:"button",onClick:e.handleCountUpClick,className:n.normalCounterButton},r.a.createElement("img",{src:$.add,alt:"Count up"})),r.a.createElement("button",{type:"button",onClick:e.handleEditClick,className:n.editCounterButton},r.a.createElement("img",{src:$.edit,alt:""}),r.a.createElement("span",null,"Edit")))))},e}return n}(r.a.Component);Y.contextType=C,Y.defaultProps={initial:0,value:0,min:0,max:Number.MAX_SAFE_INTEGER,step:1,name:"",checked:!1,onChange:E,onEditClick:E};var Z=Y,Q=n(33),ee=n(10),te=n(32),ne=n.n(te),ae=["initial","onInvert","onReset"],re=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.validity=a.inputRef.current.validity},a.handleInputChange=function(e){a.validity=e.target.validity,a.props.onChange(e)},a.handleInvertClick=function(e){e.preventDefault(),""!==a.props.value&&a.props.onInvert()},a.handleResetClick=function(e){e.preventDefault(),a.props.onReset()},a.render=function(){var e,t=Object(u.a)({},a.props),n=Object(i.a)(ae);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.hasOwnProperty(o)&&delete t[o]}}catch(l){n.e(l)}finally{n.f()}return r.a.createElement("div",{className:"extended-input"},r.a.createElement("input",Object.assign({},t,{ref:a.inputRef,type:"number",inputMode:"numeric",onChange:a.handleInputChange})),r.a.createElement("button",{type:"button",onClick:a.handleInvertClick,className:v()({"force-hidden":a.props.onInvert===E})},r.a.createElement("img",{src:$.invert,alt:"Invert sign of this value"})),r.a.createElement("button",{type:"button",onClick:a.handleResetClick,className:v()({"force-hidden":a.props.onReset===E})},r.a.createElement("img",{src:$.reset,alt:"Reset this value"})))},a.inputRef=r.a.createRef(),a.validity={},a}return n}(r.a.Component);re.defaultProps={min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,step:1,value:"",onChange:E,onInvert:E,onReset:E};var oe=re,le=n(8),ce=function(){function e(t){var n=this,a=t.code,r=void 0===a?"":a,o=t.keyName,l=void 0===o?"":o,c=t.shiftKey,i=void 0!==c&&c;Object(s.a)(this,e),this.getJumbledIfDiffersFrom=function(e){return n.equals(e)?n:ue},this.getStringToDisplay=function(){var e;return e=O?n.shiftKey?"\u21e7":"":n.shiftKey?"Shift+":"",n.code?"".concat(e).concat(pe(n.code)):"".concat(e).concat(Ee(n.keyName))},this.equals=function(e){return n.shiftKey===e.shiftKey&&n.code===e.code&&n.keyName===e.keyName},this.toString=function(){var e=n.shiftKey?"Shift":"";return"".concat(e).concat(n.code||n.keyName)},this.code=r,this.keyName=l,this.shiftKey=i}return Object(le.a)(e,null,[{key:"isValidCode",value:function(e){return he(e)}},{key:"getNotShiftedFromCode",value:function(e){return pe(e)}},{key:"isValidKey",value:function(e){return Ce(e)}},{key:"getNotShiftedFromKey",value:function(e){return Ee(e)}},{key:"NONE",get:function(){return ie}},{key:"JUMBLED",get:function(){return ue}},{key:"NO_CHANGE",get:function(){return se}}]),e}(),ie=new ce({keyName:"",code:"",shiftKey:!1}),ue=new ce(ie),se=new ce(ie),me={Backquote:"`",Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"0",Minus:"-",Equal:"=",KeyQ:"Q",KeyW:"W",KeyE:"E",KeyR:"R",KeyT:"T",KeyY:"Y",KeyU:"U",KeyI:"I",KeyO:"O",KeyP:"P",BracketLeft:"[",BracketRight:"]",Backslash:"\\",KeyA:"A",KeyS:"S",KeyD:"D",KeyF:"F",KeyG:"G",KeyH:"H",KeyJ:"J",KeyK:"K",KeyL:"L",Semicolon:";",Quote:"'",KeyZ:"Z",KeyX:"X",KeyC:"C",KeyV:"V",KeyB:"B",KeyN:"N",KeyM:"M",Comma:",",Period:".",Slash:"/"},de=Object.keys(me),he=function(e){return g(de,e)},pe=function(e){return me[e]||""},fe={"`":"`","~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0","-":"-",_:"-","=":"=","+":"=","[":"[","{":"[","]":"]","}":"]","\\":"\\","|":"\\",";":";",":":";","'":"'",'"':"'",",":",","<":",",".":".",">":".","/":"/","?":"/"},ve=Object.keys(fe),Ce=function(e){return/^[A-Za-z]$/.test(e)||g(ve,e)},Ee=function(e){return/[A-Za-z]/.test(e)?e.toUpperCase():/[`~!@#$%^&*(),./<>?;':"[\]\\{}|+_=-]/.test(e)?fe[e]:e},ge=ce,be=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).handleKeyDown=function(t){var n=t.key,a=t.shiftKey,r=t.nativeEvent.code;r?ge.isValidCode(r)?e.props.onChange(new ge({code:r,shiftKey:a})):e.props.onChange(ge.NONE):ge.isValidKey(n)?e.props.onChange(new ge({keyName:n,shiftKey:a})):e.props.onChange(ge.NONE)},e.getShortcutString=function(){var t=e.props.shortcut;return t===ge.NONE?"(None)":t===ge.JUMBLED?"(Multiple values)":t===ge.NO_CHANGE?"(No change)":t.getStringToDisplay()},e.handleCancelClick=function(t){t.preventDefault(),e.props.onChange(ge.NO_CHANGE)},e.handleRemoveClick=function(t){t.preventDefault(),e.props.onChange(ge.NONE)},e.render=function(){return r.a.createElement("div",{className:"extended-input"},r.a.createElement("input",{type:"text",value:e.getShortcutString(),onChange:E,onKeyDown:e.handleKeyDown}),r.a.createElement("button",{type:"button",onClick:e.handleCancelClick},r.a.createElement("img",{src:$.reset,alt:"Cancel modifying this shortcut binding"})),r.a.createElement("button",{type:"button",onClick:e.handleRemoveClick},r.a.createElement("img",{src:$.remove,alt:"Remove this shortcut binding"})))},e}return n}(r.a.Component);be.defaultProps={keyName:"",code:"",shiftKey:!1,shortcut:ge.NO_CHANGE,onChange:E};var Ne=be,ye=function(){function e(t){var n=this;Object(s.a)(this,e),this.getDifferenceMarked=function(t){var a,r=new e(n),o=Object(i.a)(Oe);try{for(o.s();!(a=o.n()).done;){var l=a.value;r[l]=n[l].getJumbledIfDiffersFrom(t[l])}}catch(c){o.e(c)}finally{o.f()}return r},this.equals=function(e){var t=Object.keys(n),a=Object.keys(e);return t.length===a.length&&t.every((function(t){return n[t]===e[t]}))};var a,r=Object(i.a)(Oe);try{for(r.s();!(a=r.n()).done;){var o=a.value;t&&t[o]?this[o]=t[o]:this[o]=ge.NONE}}catch(l){r.e(l)}finally{r.f()}}return Object(le.a)(e,null,[{key:"EMPTY",get:function(){return ke}},{key:"shortcutNames",get:function(){return Oe}}]),e}(),Oe=["countUp","countDown"],ke=new ye,Se=ye,we='- "Name" should not be empty or duplicated.',Ie='- "Initial/Maximum/Minimum value" should be safe integers, where (Minimum value) <= (Initial value) <= (Maximum value).',Me='- "Counter step" should be a positive safe integer.',xe={name:"",initial:"0",min:"0",max:"".concat(Number.MAX_SAFE_INTEGER),step:"1",countUpShortcut:ge.NONE,countDownShortcut:ge.NONE},Ae=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).bindNumberInputEventHandler=function(e,t){var n,r=Object(i.a)(e);try{for(r.s();!(n=r.n()).done;){var o,l=n.value,c=l[0].toUpperCase()+l.substring(1),u=Object(i.a)(t);try{for(u.s();!(o=u.n()).done;){var s=o.value,m=s[0].toUpperCase()+s.substring(1),d="handleNumberInput".concat(m);a[d]&&(a["handle".concat(c).concat(m)]=a[d].bind(Object(ee.a)(a),l))}}catch(h){u.e(h)}finally{u.f()}}}catch(h){r.e(h)}finally{r.f()}},a.handleModalAfterOpen=function(){a.props.existingNames?a.setState(Object(u.a)({},xe,{namePattern:"^(?!(".concat(a.props.existingNames.map((function(e){return ne()(e)})).join("|"),")$).+$")})):a.props.onCancel()},a.handleNameChange=function(e){a.setState({name:e.target.value})},a.handleNumberInputChange=function(e,t){var n=t.target.validity;a.setState(Object(c.a)({},e,t.target.value),(function(){return console.log(e,n)}))},a.handleNumberInputInvert=function(e){a.setState((function(t){if(!isNaN(parseInt(t[e],10)))return Object(c.a)({},e,-t[e])}))},a.handleCountUpShortcutChange=function(e){a.setState({countUpShortcut:e})},a.handleCountDownShortcutChange=function(e){a.setState({countDownShortcut:e})},a.handleSubmitClick=function(e){e.preventDefault();var t=[];if(a.nameRef.current.validity.valid||t.push(we),a.initialRef.current.validity.valid&&a.minRef.current.validity.valid&&a.maxRef.current.validity.valid||t.push(Ie),a.stepRef.current.validity.valid||t.push(Me),t.length>0)window.alert("Some values are invalid!\n"+t.join("\n"));else{var n=a.state,r=n.name,o=n.initial,l=n.min,c=n.max,i=n.step,u=[o,l,c,i].map((function(e){return Number.parseInt(e,10)})),s=Object(Q.a)(u,4);o=s[0],l=s[1],c=s[2],i=s[3];var m=a.state,d=m.countUpShortcut,h=m.countDownShortcut,p=new Se({countUp:d,countDown:h});a.props.onSubmit({name:r,initial:o,min:l,max:c,step:i,shortcuts:p})}},a.handleCancelClick=function(e){e.preventDefault(),a.props.onCancel()},a.render=function(){return r.a.createElement(p.a,{isOpen:a.props.isOpen,onAfterOpen:a.handleModalAfterOpen,onRequestClose:a.props.onCancel,contentLabel:"Add New Counter",shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,className:"modal",overlayClassName:"modal-overlay"},r.a.createElement("h1",null,"Add New Counter"),r.a.createElement("hr",null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{ref:a.nameRef,type:"text",required:!0,pattern:a.state.namePattern,value:a.state.name,onChange:a.handleNameChange})),r.a.createElement("li",null,r.a.createElement("label",null,"Initial value (Integer)"),r.a.createElement(oe,{ref:a.initialRef,required:!0,min:a.state.min,max:a.state.max,step:1,value:a.state.initial,onChange:a.handleInitialChange,onInvert:a.handleInitialInvert}),r.a.createElement("p",{className:"modal-input-constraint"},S(a.state.min)," ... ",S(a.state.max))),r.a.createElement("li",null,r.a.createElement("label",null,"Minimum value (Integer)"),r.a.createElement(oe,{ref:a.minRef,required:!0,min:Number.MIN_SAFE_INTEGER,max:a.state.initial,step:1,value:a.state.min,onChange:a.handleMinChange,onInvert:a.handleMinInvert}),r.a.createElement("p",{className:"modal-input-constraint"},w.MIN_SAFE_INTEGER," ... ",S(a.state.initial))),r.a.createElement("li",null,r.a.createElement("label",null,"Maximum value (Integer)"),r.a.createElement(oe,{ref:a.maxRef,required:!0,min:a.state.initial,max:Number.MAX_SAFE_INTEGER,step:1,value:a.state.max,onChange:a.handleMaxChange,onInvert:a.handleMaxInvert}),r.a.createElement("p",{className:"modal-input-constraint"},S(a.state.initial)," ... ",w.MAX_SAFE_INTEGER)),r.a.createElement("li",null,r.a.createElement("label",null,"Count step (Positive integer)"),r.a.createElement(oe,{ref:a.stepRef,required:!0,min:1,max:Number.MAX_SAFE_INTEGER,step:1,value:a.state.step,onChange:a.handleStepChange}),r.a.createElement("p",{className:"modal-input-constraint"},"1 ... ",w.MAX_SAFE_INTEGER))),r.a.createElement("hr",null),r.a.createElement("h2",null,"Shortcuts"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("label",null,"Count Up"),r.a.createElement(Ne,{shortcut:a.state.countUpShortcut,onChange:a.handleCountUpShortcutChange})),r.a.createElement("li",null,r.a.createElement("label",null,"Count Down"),r.a.createElement(Ne,{shortcut:a.state.countDownShortcut,onChange:a.handleCountDownShortcutChange}))),r.a.createElement("hr",null),r.a.createElement("ul",{className:"modal-actions"},r.a.createElement("li",null,r.a.createElement("button",{type:"reset",onClick:a.handleCancelClick,className:"action-button button-negative"},r.a.createElement("img",{src:$.close,alt:"Cancel"}))),r.a.createElement("li",null,r.a.createElement("button",{type:"button",onClick:a.handleSubmitClick,className:"action-button button-positive"},r.a.createElement("img",{src:$.check,alt:"Add"})))))},a.bindNumberInputEventHandler(["initial","min","max"],["change","invert"]),a.bindNumberInputEventHandler(["step"],["change"]),a.nameRef=r.a.createRef(),a.initialRef=r.a.createRef(),a.minRef=r.a.createRef(),a.maxRef=r.a.createRef(),a.stepRef=r.a.createRef(),a.state=xe,a}return n}(r.a.Component),Re=n(15),De=function(){function e(t){var n=this;Object(s.a)(this,e),this.getCorrectedValue=function(){return n.value<n.min?n.min:n.value>n.max?n.max:n.value},this.getCorrectedCounterData=function(){return new e(Object(u.a)({},n,{value:n.getCorrectedValue()}))},this.getComparisonObject=function(){var t,a={},r=Object(i.a)(je);try{for(r.s();!(t=r.n()).done;){var o=t.value;a[o]=n[o]}}catch(l){r.e(l)}finally{r.f()}return new e(a)},this.getJumbledIfDiffersFrom=function(t){var a,r=new e(n),o=Object(i.a)(je);try{for(o.s();!(a=o.n()).done;){var l=a.value;n[l]!==t[l]&&(r[l]="")}}catch(c){o.e(c)}finally{o.f()}return r};var a=Object(u.a)({},Z.defaultProps,{},t),r=a.name,o=a.value,l=a.initial,c=a.min,m=a.max,d=a.step,h=a.checked,p=a.onChange,f=a.onEditClick,v=a.shortcuts;this.name=r,this.value=o,this.initial=l,this.min=c,this.max=m,this.step=d,this.checked=h,this.onChange=p,this.onEditClick=f,this.shortcuts=v||Se.EMPTY}return Object(le.a)(e,null,[{key:"manipulatorProps",get:function(){return je}}]),e}(),je=["value","initial","min","max","step"],_e=De,Ue='- "Value" should be a safe integer within the correct range.',Te='- "Initial value" should be a safe integer within the correct range.',Ke='- "Minimum value" should be a safe integer within the correct range.',Be='- "Maximum value" should be a safe integer within the correct range.',Ge='- "Counter step" should be a positive safe integer.',Pe=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).bindNumberInputEventHandler=function(e,t){var n,r=Object(i.a)(e);try{for(r.s();!(n=r.n()).done;){var o,l=n.value,c=l[0].toUpperCase()+l.substring(1),u=Object(i.a)(t);try{for(u.s();!(o=u.n()).done;){var s=o.value,m=s[0].toUpperCase()+s.substring(1),d="handleNumberInput".concat(m);a[d]&&(a["handle".concat(c).concat(m)]=a[d].bind(Object(ee.a)(a),l))}}catch(h){u.e(h)}finally{u.f()}}}catch(h){r.e(h)}finally{r.f()}},a.getActualLowerBound=function(e){return""===e.min?e.defaults.rangeLowerBound:e.min},a.getActualUpperBound=function(e){return""===e.max?e.defaults.rangeUpperBound:e.max},a.getActualMaxOfMin=function(e){return Math.min.apply(Math,Object(Re.a)([e.max].filter((function(e){return""!==e}))).concat([""!==e.initial||""!==e.value?Math.min(e.initial,e.value):e.defaults.minPropUpperBound]))},a.getActualMinOfMax=function(e){return Math.max.apply(Math,Object(Re.a)([e.min].filter((function(e){return""!==e}))).concat([""!==e.initial||""!==e.value?Math.max(e.initial,e.value):e.defaults.maxPropLowerBound]))},a.handleModalAfterOpen=function(){a.props.names&&a.props.names.length?a.setState((function(e,t){for(var n=t.names.length,a=new _e(t.counters[t.names[0]]),r=Math.min(Number.MAX_SAFE_INTEGER,a.initial,a.value),o=Math.max(Number.MIN_SAFE_INTEGER,a.initial,a.value),l=a.min,c=a.max,u=1;u<n;u+=1){var s=t.counters[t.names[u]];r=Math.min(r,s.initial,s.value),o=Math.max(o,s.initial,s.value),l=Math.max(l,s.min),c=Math.min(c,s.max);var m,d=Object(i.a)(_e.manipulatorProps);try{for(d.s();!(m=d.n()).done;){var h=m.value;a[h]!==s[h]&&(a[h]="")}}catch(b){d.e(b)}finally{d.f()}a.shortcuts=a.shortcuts.getDifferenceMarked(s.shortcuts)}var p=a.value,f=a.initial,v=a.min,C=a.max,E=a.step,g=a.shortcuts;return{value:p,initial:f,min:v,max:C,step:E,defaults:{minPropUpperBound:r,maxPropLowerBound:o,rangeLowerBound:l,rangeUpperBound:c},countUpShortcut:g.countUp,countDownShortcut:g.countDown}})):a.props.onCancel()},a.handleNumberInputChange=function(e,t){a.setState(Object(c.a)({},e,t.target.value))},a.handleNumberInputInvert=function(e){a.setState((function(t){if(!isNaN(parseInt(t[e],10)))return Object(c.a)({},e,-t[e])}))},a.handleNumberInputReset=function(e){a.setState(Object(c.a)({},e,""))},a.handleCountUpShortcutChange=function(e){a.setState({countUpShortcut:e})},a.handleCountDownShortcutChange=function(e){a.setState({countDownShortcut:e})},a.handleSubmitClick=function(e){e.preventDefault();var t=[];if(a.valueRef.current.validity.valid||t.push(Ue),a.initialRef.current.validity.valid||t.push(Te),a.minRef.current.validity.valid||t.push(Ke),a.maxRef.current.validity.valid||t.push(Be),a.stepRef.current.validity.valid||t.push(Ge),t.length>0)window.alert("Some values are invalid!\n"+t.join("\n"));else{var n,r=a.state,o=r.value,l=r.initial,c=r.min,s=r.max,m=r.step,d=r.countUpShortcut,h=r.countDownShortcut,p={value:o,initial:l,min:c,max:s,step:m,shortcuts:new Se({countUp:d,countDown:h})},f=!0,v=Object(i.a)(_e.manipulatorProps);try{for(v.s();!(n=v.n()).done;){var C=n.value;""===p[C]?delete p[C]:(p[C]=Number.parseInt(p[C],10),Number.isSafeInteger(p[C])||(f=!1))}}catch(E){v.e(E)}finally{v.f()}f?a.props.onSubmit(Object(u.a)({names:a.props.names},p)):console.error("Something wrong!")}},a.handleCancelClick=function(e){e.preventDefault(),a.props.onCancel()},a.render=function(){var e=a.props.names.map((function(e){return r.a.createElement("li",{key:e},e)})),t=a.getActualLowerBound(a.state),n=a.getActualUpperBound(a.state),o=a.getActualMaxOfMin(a.state),l=a.getActualMinOfMax(a.state),c=S(t),i=S(n),u=t<=n?"".concat(c," ... ").concat(i):"Unchangeable (Leave blank)";return r.a.createElement(p.a,{isOpen:a.props.isOpen,onAfterOpen:a.handleModalAfterOpen,onRequestClose:a.props.onCancel,contentLabel:"Edit Counters",shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,className:"modal",overlayClassName:"modal-overlay"},r.a.createElement("h1",null,"Edit Counters"),r.a.createElement("hr",null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("label",null,"Name"),r.a.createElement("ul",{className:"modal-counter-names"},e)),r.a.createElement("li",null,r.a.createElement("label",null,"Value (Integer)"),r.a.createElement(oe,{ref:a.valueRef,min:t,max:n,step:1,value:a.state.value,onChange:a.handleValueChange,onInvert:a.handleValueInvert,onReset:a.handleValueReset}),r.a.createElement("p",{className:"modal-input-constraint"},u)),r.a.createElement("li",null,r.a.createElement("label",null,"Initial value (Integer)"),r.a.createElement(oe,{ref:a.initialRef,min:t,max:n,step:1,value:a.state.initial,onChange:a.handleInitialChange,onInvert:a.handleInitialInvert,onReset:a.handleInitialReset}),r.a.createElement("p",{className:"modal-input-constraint"},u)),r.a.createElement("li",null,r.a.createElement("label",null,"Minimum value (Integer)"),r.a.createElement(oe,{ref:a.minRef,min:Number.MIN_SAFE_INTEGER,max:o,step:1,value:a.state.min,onChange:a.handleMinChange,onInvert:a.handleMinInvert,onReset:a.handleMinReset}),r.a.createElement("p",{className:"modal-input-constraint"},w.MIN_SAFE_INTEGER," ... ",S(o))),r.a.createElement("li",null,r.a.createElement("label",null,"Maximum value (Integer)"),r.a.createElement(oe,{ref:a.maxRef,min:l,max:Number.MAX_SAFE_INTEGER,step:1,value:a.state.max,onChange:a.handleMaxChange,onInvert:a.handleMaxInvert,onReset:a.handleMaxReset}),r.a.createElement("p",{className:"modal-input-constraint"},S(l)," ... ",w.MAX_SAFE_INTEGER)),r.a.createElement("li",null,r.a.createElement("label",null,"Count step (Positive integer)"),r.a.createElement(oe,{ref:a.stepRef,min:1,max:Number.MAX_SAFE_INTEGER,step:1,value:a.state.step,onChange:a.handleStepChange,onReset:a.handleStepReset}),r.a.createElement("p",{className:"modal-input-constraint"},"1 ... ",w.MAX_SAFE_INTEGER))),r.a.createElement("hr",null),r.a.createElement("h2",null,"Shortcuts"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("label",null,"Count Up"),r.a.createElement(Ne,{shortcut:a.state.countUpShortcut,onChange:a.handleCountUpShortcutChange})),r.a.createElement("li",null,r.a.createElement("label",null,"Count Down"),r.a.createElement(Ne,{shortcut:a.state.countDownShortcut,onChange:a.handleCountDownShortcutChange}))),r.a.createElement("hr",null),r.a.createElement("ul",{className:"modal-actions"},r.a.createElement("li",null,r.a.createElement("button",{type:"reset",onClick:a.handleCancelClick,className:"action-button button-negative"},r.a.createElement("img",{src:$.close,alt:"Cancel"}))),r.a.createElement("li",null,r.a.createElement("button",{type:"button",onClick:a.handleSubmitClick,className:"action-button button-positive"},r.a.createElement("img",{src:$.check,alt:"Apply"})))))},a.bindNumberInputEventHandler(["value","initial","min","max"],["change","invert","reset"]),a.bindNumberInputEventHandler(["step"],["change","reset"]),a.valueRef=r.a.createRef(),a.initialRef=r.a.createRef(),a.minRef=r.a.createRef(),a.maxRef=r.a.createRef(),a.stepRef=r.a.createRef(),a.state={value:"0",initial:"0",min:"0",max:"".concat(Number.MAX_SAFE_INTEGER),step:"1",defaults:{minPropUpperBound:Number.MAX_SAFE_INTEGER,maxPropLowerBound:Number.MIN_SAFE_INTEGER,rangeLowerBound:Number.MIN_SAFE_INTEGER,rangeUpperBound:Number.MAX_SAFE_INTEGER},countUpShortcut:ge.NONE,countDownShortcut:ge.NONE},a}return n}(r.a.Component),Fe={GET_COUNTED_UP:function(e){return new _e(Object(u.a)({},e,{value:e.value+e.step})).getCorrectedCounterData()},GET_COUNTED_DOWN:function(e){return new _e(Object(u.a)({},e,{value:e.value-e.step})).getCorrectedCounterData()}},Le=function(){function e(t,n){Object(s.a)(this,e),this.target=t,this.execute=n}return Object(le.a)(e,null,[{key:"actionPresets",get:function(){return Fe}}]),e}(),Xe="counterOrder",Ve="counter_",Je="__storage_test__",We=function(e){return Ve+e},qe=function(){try{return localStorage.setItem(Je,Je),localStorage.removeItem(Je),!0}catch(e){return!1}}(),He=function(){if(!qe)return null;Ze();return ze(["Sample Counter"]),Ye(new _e({name:"Sample Counter"})),!0},ze=function(e){return qe?(localStorage.setItem(Xe,JSON.stringify(e)),!0):null},$e=["name","value","initial","min","max","step","shortcuts"],Ye=function(e){if(!qe)return null;var t,n={},a=Object(i.a)($e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r]=e[r]}}catch(o){a.e(o)}finally{a.f()}return localStorage.setItem(We(e.name),JSON.stringify(n)),!0},Ze=function(){return qe?(localStorage.clear(),!0):null},Qe={available:qe,initialize:He,getCounterOrder:function e(t){if(!qe)return null;var n=localStorage.getItem(Xe),a=JSON.parse(n);return a&&a.constructor===Array?a:t?null:(He(),e(!0))},setCounterOrder:ze,getCounterData:function(e){if(!qe)return null;var t=localStorage.getItem(We(e)),n=JSON.parse(t);if(!n)return null;if(n.shortcuts){var a,r=Object(i.a)(Se.shortcutNames);try{for(r.s();!(a=r.n()).done;){var o=a.value;n.shortcuts[o]=n.shortcuts[o]?new ge(n.shortcuts[o]):ge.NONE}}catch(l){r.e(l)}finally{r.f()}n.shortcuts=new Se(n.shortcuts)}return new _e(n)},setCounterData:Ye,removeCounterData:function(e){return qe?(localStorage.removeItem(We(e)),!0):null},clear:Ze};p.a.setAppElement("#root");var et=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){document.addEventListener("keydown",a.handleDocumentKeyDown),a.loadCounters()},a.componentWillUnmount=function(){document.removeEventListener("keydown",a.handleDocumentKeyDown)},a.handleDocumentKeyDown=function(e){if(!(I.isTextForm(e.target)||a.state.isEditModeEnabled||a.state.modal)){var t=e.key,n=e.code,r=e.shiftKey,o=e.ctrlKey,l=e.altKey,c=e.metaKey;if(!(o||l||c||n&&I.includes(n.toLowerCase(),"shift")||I.includes(t.toLowerCase(),"shift"))){var i=String(new ge({code:n,shiftKey:r,keyName:t})),s=a.state.counterActionsByShortcutId[i];if(s&&s.length){var m=s.map((function(e){return e.execute(Object(u.a)({},a.state.counters[e.target]))}));a.updateCounters(m)}}}},a.loadCounters=function(){var e,t=Object(i.a)(Qe.getCounterOrder());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=Qe.getCounterData(n);r&&a.appendCounter(r)}}catch(o){t.e(o)}finally{t.f()}},a.getUpdatedCounterActions=function(e,t){var n=t.newCounterData,a=t.oldCounterData,r={countUp:Le.actionPresets.GET_COUNTED_UP,countDown:Le.actionPresets.GET_COUNTED_DOWN},o=a&&a.shortcuts,l=n.shortcuts;e=Object(u.a)({},e);var c,s=Object(i.a)(Se.shortcutNames);try{var m=function(){var t=c.value,i=o&&String(o[t]),u=String(l[t]);if(i&&u&&i===u)return"continue";if(i&&l[t]!==ge.JUMBLED&&l[t]!==ge.NO_CHANGE){var s=e[i];e[i]=s.filter((function(e){return e.target!==a.name||e.execute!==r[t]})),0===e[i].length&&delete e[i]}if(u){var m=I.initializeOrGetArrayProperty(e,u).slice();m.push(new Le(n.name,r[t])),e[u]=m}};for(s.s();!(c=s.n()).done;)m()}catch(d){s.e(d)}finally{s.f()}return e},a.getNewCounter=function(e){return r.a.createElement(Z,Object.assign({},e,{key:e.name}))},a.appendCounter=function(e){a.setState((function(t){var n,r=e.name,o=new Se(e.shortcuts),l=Object(i.a)(Se.shortcutNames);try{for(l.s();!(n=l.n()).done;){var s=n.value;ge.NONE.equals(o[s])&&(o[s]=ge.NONE)}}catch(f){l.e(f)}finally{l.f()}e=new _e(Object(u.a)({},e,{shortcuts:o,onChange:function(e){a.updateCounters([e])},onEditClick:a.handleSingleCounterEditClick}));var m=Object(u.a)({},t.counters,Object(c.a)({},r,e)),d=t.counterOrder.slice(),h=Object(u.a)({},t.counterIndexesByName,Object(c.a)({},r,d.length));d.push(r);var p=a.getUpdatedCounterActions(t.counterActionsByShortcutId,{newCounterData:e});return Qe.setCounterOrder(d),Qe.setCounterData(e),{counterOrder:d,counterIndexesByName:h,counters:m,counterActionsByShortcutId:p}}))},a.updateCounters=function(e){a.setState((function(t){var n,r=Object(u.a)({},t.counters),o=Object(u.a)({},t.counterActionsByShortcutId),l=Object(i.a)(e);try{for(l.s();!(n=l.n()).done;){var c=n.value,s=c.name;if("number"!==typeof t.counterIndexesByName[s])return;if(c.shortcuts){o=a.getUpdatedCounterActions(o,{newCounterData:c,oldCounterData:r[s]});var m,d={},h=Object(i.a)(Se.shortcutNames);try{for(h.s();!(m=h.n()).done;){var p=m.value,f=c.shortcuts[p],v=String(f)||f===ge.NONE;d[p]=v?f:r[s].shortcuts[p]}}catch(C){h.e(C)}finally{h.f()}c=new _e(Object(u.a)({},r[s],{},c,{shortcuts:new Se(d)}))}r[s]=Object(u.a)({},r[s],{},c),Qe.setCounterData(r[s])}}catch(C){l.e(C)}finally{l.f()}return{counters:r,counterActionsByShortcutId:o}}),a.updateCheckedCountersState)},a.updateCheckedCountersState=function(){a.setState((function(e){return{checkedCounters:e.counterOrder.filter((function(t){return e.counters[t].checked}))}}))},a.checkOrUncheckAll=function(e){a.setState((function(t){var n,a=Object(u.a)({},t.counters),r=Object(i.a)(t.counterOrder);try{for(r.s();!(n=r.n()).done;){var o=n.value;a[o].checked!==e&&(a[o]=Object(u.a)({},a[o],{checked:e}))}}catch(l){r.e(l)}finally{r.f()}return{counters:a}}),a.updateCheckedCountersState)},a.removeCheckedCounters=function(){0!==a.state.checkedCounters.length&&a.setState((function(e){var t=Object(u.a)({},e.counterIndexesByName),n=Object(u.a)({},e.counters),r=Object(u.a)({},e.counterActionsByShortcutId),o=0,l=e.counterOrder.filter((function(e,l){var c=n[e].checked;if(c){var i=new _e(Object(u.a)({},n[e],{shortcuts:Se.EMPTY}));r=a.getUpdatedCounterActions(r,{newCounterData:i,oldCounterData:n[e]}),delete t[e],delete n[e],Qe.removeCounterData(e),o+=1}else t[e]=l-o;return!c}));return Qe.setCounterOrder(l),{counterOrder:l,counterIndexesByName:t,counters:n,counterActionsByShortcutId:r,isEditModeEnabled:!1}}),a.updateCheckedCountersState)},a.openOrCloseModal=function(e,t){a.setState({modal:e?t:""})},a.isEveryCounterChecked=function(){return a.state.checkedCounters.length===a.state.counterOrder.length},a.handleResetClick=function(e){if(e.preventDefault(),0!==a.state.checkedCounters.length){var t=a.state.checkedCounters.map((function(e){return{name:e,checked:!1,value:a.state.counters[e].initial}}));a.updateCounters(t),a.setState({isEditModeEnabled:!1})}},a.handleRemoveClick=function(e){e.preventDefault(),a.removeCheckedCounters()},a.handleClearClick=function(e){e.preventDefault(),window.confirm("All counters will be removed if you click \u2018OK\u2019 button.")&&(Qe.initialize(),window.location.reload())},a.handleNewCounterClick=function(e){e.preventDefault(),a.openOrCloseModal(!0,"AddNewCounterModal")},a.handleNewCounterModalSubmit=function(e){var t=new _e(Object(u.a)({},e,{value:e.initial}));a.appendCounter(t),a.openOrCloseModal(!1)},a.handleEditCountersClick=function(e){e.preventDefault(),a.state.checkedCounters.length>0&&a.openOrCloseModal(!0,"EditCountersModal")},a.handleEditCountersModalSubmit=function(e){var t,n=a.state.counters,r={},o=Object(i.a)(Se.shortcutNames);try{for(o.s();!(t=o.n()).done;){var l=t.value;e.shortcuts[l]!==ge.JUMBLED&&(r[l]=e.shortcuts[l])}}catch(s){o.e(s)}finally{o.f()}var c=e.names.map((function(t){var a=e.value,o=void 0===a?n[t].value:a,l=e.initial,c=void 0===l?n[t].initial:l,i=e.min,s=void 0===i?n[t].min:i,m=e.max,d=void 0===m?n[t].max:m,h=e.step,p=void 0===h?n[t].step:h,f=e.shortcuts,v=void 0===f?n[t].shortcuts:f;return{name:t,value:o,initial:c,min:s,max:d,step:p,shortcuts:new Se(Object(u.a)({},v,{},r))}}));a.updateCounters(c),a.openOrCloseModal(!1),a.state.singleCounterToEdit||a.checkOrUncheckAll(!1),a.setState((function(e){return{singleCounterToEdit:null,isEditModeEnabled:!!e.singleCounterToEdit}}))},a.handleModalCancel=function(){a.openOrCloseModal(!1),a.setState({singleCounterToEdit:null})},a.handleEditCounterListClick=function(e){e.preventDefault(),a.checkOrUncheckAll(!1),a.setState((function(e){return{isEditModeEnabled:!e.isEditModeEnabled}}))},a.handleSelectAllClick=function(e){e.preventDefault(),a.checkOrUncheckAll(!a.isEveryCounterChecked())},a.handleSingleCounterEditClick=function(e){a.setState((function(t){return{singleCounterToEdit:t.counters[e]}}),(function(){a.openOrCloseModal(!0,"EditCountersModal")}))},a.render=function(){var e=a.state.isEditModeEnabled,t={headerItem:{normalOnly:v()("header-item",{"force-hidden":e}),editModeOnly:v()("header-item",{"force-hidden":!e})},addNewCounterButton:v()("button-add","button-positive",{invisible:e})},n=a.state.counterOrder.slice().map((function(e){return a.getNewCounter(a.state.counters[e])})),o=a.state.singleCounterToEdit,l={counters:o?Object(c.a)({},o.name,o):a.state.counters,names:o?[o.name]:a.state.checkedCounters};return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"header-container"},r.a.createElement("header",{className:"header"},r.a.createElement("ul",{className:"header-item-group group-left"},r.a.createElement("li",{className:t.headerItem.normalOnly},r.a.createElement("h1",{className:"app-title"},"MultiCounter")),r.a.createElement("li",{className:t.headerItem.editModeOnly},r.a.createElement("button",{type:"button",onClick:a.handleSelectAllClick,className:"button-with-icon-text"},r.a.createElement("img",{src:$.checkAll,alt:""}),r.a.createElement("span",null,"Select All"))),r.a.createElement("li",{className:t.headerItem.editModeOnly},r.a.createElement("button",{type:"button",onClick:a.handleEditCountersClick,className:"button-with-icon-text"},r.a.createElement("img",{src:$.edit,alt:""}),r.a.createElement("span",null,"Edit"))),r.a.createElement("li",{className:t.headerItem.editModeOnly},r.a.createElement("button",{type:"button",onClick:a.handleResetClick,className:"button-with-icon-text button-negative"},r.a.createElement("img",{src:$.reset,alt:""}),r.a.createElement("span",null,"Reset"))),r.a.createElement("li",{className:t.headerItem.editModeOnly},r.a.createElement("button",{type:"button",onClick:a.handleRemoveClick,className:"button-with-icon-text button-negative"},r.a.createElement("img",{src:$.remove,alt:""}),r.a.createElement("span",null,"Remove"))),r.a.createElement("li",{className:t.headerItem.editModeOnly},r.a.createElement("button",{type:"button",onClick:a.handleClearClick,className:"button-with-icon-text button-negative"},r.a.createElement("img",{src:$.clear,alt:""}),r.a.createElement("span",null,"Clear All")))),r.a.createElement("ul",{className:"header-item-group group-right"},r.a.createElement("li",{className:"header-item"},r.a.createElement("button",{type:"button",onClick:a.handleEditCounterListClick,className:"button-with-icon"},e?r.a.createElement("img",{src:$.close,alt:"Exit Edit Mode"}):r.a.createElement("img",{src:$.menu,alt:"Edit Counter List"})))))),r.a.createElement("div",{className:"main-container"},r.a.createElement("main",{className:"main"},r.a.createElement(C.Provider,{value:e},n),r.a.createElement("div",{className:"main-additional"},r.a.createElement("button",{type:"button",onClick:a.handleNewCounterClick,className:t.addNewCounterButton},r.a.createElement("img",{src:$.add,alt:"Add New Counter"}))))),r.a.createElement(Ae,{existingNames:a.state.counterOrder,isOpen:"AddNewCounterModal"===a.state.modal,onSubmit:a.handleNewCounterModalSubmit,onCancel:a.handleModalCancel}),r.a.createElement(Pe,{counters:l.counters,names:l.names,isOpen:"EditCountersModal"===a.state.modal,onSubmit:a.handleEditCountersModalSubmit,onCancel:a.handleModalCancel}))},a.state={counterOrder:[],counterIndexesByName:{},counters:{},counterActionsByShortcutId:{},checkedCounters:[],singleCounterToEdit:null,modal:"",isEditModeEnabled:!1},a}return n}(r.a.Component),tt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function nt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(et,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/multi-counter",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/multi-counter","/service-worker.js");tt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):nt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):nt(t,e)}))}}()}},[[34,1,2]]]);
//# sourceMappingURL=main.93f7a296.chunk.js.map